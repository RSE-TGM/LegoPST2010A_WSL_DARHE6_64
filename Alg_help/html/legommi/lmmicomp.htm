<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1252">
<META NAME="Generator" CONTENT="Microsoft Word 97">
<TITLE>LEGOMMI HELP</TITLE>
<META NAME="subject" CONTENT="Documentazione LEGOMMI">
<META NAME="doccomm" CONTENT="LMMIHELP compilation">
<META NAME="Template" CONTENT="C:\PROGRAMMI\MICROSOFT OFFICE\OFFICE\html.dot">
</HEAD>
<BODY>

<B><FONT SIZE=5><P><A NAME="MmiCompilation"></A>LEGOMMI: compilation for animated pages</P>
</B></FONT><P ALIGN="JUSTIFY">Once the graphic built of a page (synoptic or regulation) has been completed, the user can compile it in order to use the page in animation during run-time by pressing "Page" on the Compile's pulldown menu.</P>
<P ALIGN="JUSTIFY">All types of pages can be completed for animation: make sure when you compile regulation page for synoptic use (animation use) that the simulator description file (variabili.rtf) is updated.</P>
<P ALIGN="JUSTIFY">During compilation, all reference to simulation variable names associated with icons are solved in terms of pointers to dynamic simulator data base where calculated values from simulation reside. Also page links are verified.</P>
<P ALIGN="JUSTIFY">Compilation produces an output ASCII file, <I>page.rtf</I> which will be used by <I>mmi.</P>
</I><P ALIGN="JUSTIFY">In case of error, errors will be collected in an ASCII file, <I>page.rtf_err</I>, which will appear afterwards by clicking "Page Error View" on the Compile pulldown menu. For any easy debugging Compilator draws a red cross on objects that caused errors during page compilation.</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY"><IMG SRC="Image100.gif" WIDTH=244 HEIGHT=324></P>
<B><P ALIGN="JUSTIFY">&nbsp;</P>
<FONT FACE="Arial, helvetica" SIZE=5><P ALIGN="JUSTIFY">&nbsp;</P>
</FONT><FONT SIZE=5><P><A NAME="MmiTags"></A>LEGOMMI: identifier tags in regulation pages</P>
</B></FONT><P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">Inside the regulation pages LEGOMMI uses different tags, or codes, to define regulation pages and their instantiated objects.</P>
<P ALIGN="JUSTIFY">LEGOMMI has the following types of identifier tags:</P>
<P ALIGN="JUSTIFY">1) tags dedicated to internal use of LEGOMMI (i.e 15w22c).</P>
<P ALIGN="JUSTIFY">2) tags used for blocks and variable LEGO name construction.</P>
<P ALIGN="JUSTIFY">3) tags generated<B><I> </B></I>taking from the environment.</P>
<B><P ALIGN="JUSTIFY">1)</P>
<P ALIGN="JUSTIFY">MMI instantiated identifier</P>
</B><P ALIGN="JUSTIFY">- Once an object has been instantiated, MMI assigns a tag, i.e. 15w.</P>
<P ALIGN="JUSTIFY">- Once in the same object, a child (i.e. port or dispreg) is instantiated and the composed tag is assigned; it is composed by the parent identifier followed by an univocal tag, i.e. 15w22c.</P>
<B><P ALIGN="JUSTIFY">N.B.</B> These identifiers are of internal use of LEGOMMI; their interest for the user is limited in object easy identification by name during compilation.</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<B><P ALIGN="JUSTIFY">2)</P>
<P ALIGN="JUSTIFY">Progressive number</P>
</B><P ALIGN="JUSTIFY">- &lt;XX&gt; Every page is associated with a code, build with numbers and characters, i.e.:</P>
<P ALIGN="JUSTIFY">00,01, ... , 0A, 0B, ... , 0Z,10,11, ... , ZZ</P>
<P ALIGN="JUSTIFY">These numbers are univocal for every page and are not recomputated once a page is deleted.</P>
<P ALIGN="JUSTIFY">- &lt;YY&gt; At every object instantiated inside a page is associated an univocal code such as the one above .</P>
<B><P ALIGN="JUSTIFY">Iconreg tag</P>
</B><P ALIGN="JUSTIFY">It is an univocal tag which identifies the object. It is composed by 4 characters: object and page progressives </P>
<P ALIGN="JUSTIFY">---------&gt;XXYY.</P>
<B><P ALIGN="JUSTIFY">Elementary module name</P>
</B><P ALIGN="JUSTIFY">- &lt;&amp;&amp;&amp;&amp;&gt; Once an iconreg has been associated to an elementary regulation module, i.e. "and2", the file name will be used to build the name of the instantiated module.</P>
<B><P ALIGN="JUSTIFY">Name of an instantiated block</P>
</B><P ALIGN="JUSTIFY">It is composed by the elementary module name followed by the iconreg tag:</P>
<P ALIGN="JUSTIFY">---------&gt;&amp;&amp;&amp;&amp;XXYY.</P>
<B><P ALIGN="JUSTIFY">Name of a variable</P>
</B><P ALIGN="JUSTIFY">It is composed by the variable name of the elementary module (2 character) followed by the iconreg tag, by the progressive number and by the first two character of the task name:</P>
<P ALIGN="JUSTIFY">---------&gt;JIXXYYTA</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<B><P ALIGN="JUSTIFY">3)</P>
<P ALIGN="JUSTIFY">Name of a task</P>
</B><P ALIGN="JUSTIFY">The task name is created by the working directory i.e. "tasknumber1". This name will insert inside f14.dat and f01.dat files and the first two character will be used to built the LEGO variables name.</P>
<B><FONT SIZE=5><P><A NAME="compRegSchem"></A>LEGOMMI: compilation of a regulation scheme</P>
</B></FONT><P ALIGN="JUSTIFY">Once the graphic built of the scheme has been completed, the user can generate the code by pressing "Compile Regulation" on the Compile's pulldown menu. </P>
<P ALIGN="JUSTIFY">Only the regulation schemes have to be compiled to obtain the regulation fortran files used by LEGO which will be linked to build the regulation task assembling the different schemes as single blocks. If it is selected for a synoptic page, this choice displays a warning dialog window which warns the user that the operation is not permitted.</P>
<P ALIGN="JUSTIFY">The "Compile Regulation" option, starting from the information contained inside the page objects (widget, connections), produces a fortran code of the scheme which is able to interface with the elementary regulation module and computes a steady state which will be loaded again inside the objects.</P>
<P ALIGN="JUSTIFY">In particular REGOMMI subdivides the compilation of a page called XXXX in the following phases:</P><DIR>

<P ALIGN="JUSTIFY">1) Gathers information from the page, <I>production</I> of <B>XXXX.reg</B>,<B> </B>and<B> XXXX.reg_err </B>containing<B> </B>errors</P>
<P ALIGN="JUSTIFY">2) Describes the topology starting from XXXX.reg, <I>production</I> of <B>XXXX.top</P>
</B><P ALIGN="JUSTIFY">3) Generates of the fortran code, <I>production</I> of <B>XXXX.f</B>,<B> XXXX.dat</B>,<B> XXXX_01.dat</P>
</B><P ALIGN="JUSTIFY">4) Integrates, if necessary, <B>lista_schemi.dat</B> file </P>
<P ALIGN="JUSTIFY">5) Adds the object in the <B>schemi_reg.a</B> library</P>
<P ALIGN="JUSTIFY">6) Computes the steady state of the scheme: <I>production</I> of the lg3reg executable file, its running with the <I>production</I> of the output files <B>XXXX_04.dat</B>,<B> XXXX_14.dat</P>
</B><P ALIGN="JUSTIFY">7) Updates all data inside the page with steady state values</P></DIR>

<P ALIGN="JUSTIFY">Of course when the "Scheme in use" page flag is not set the scheme will not be inserted in the library and in the list (4,5).</P>
<P ALIGN="JUSTIFY">In case of error message dialog boxes will be displayed and errors will be gathered in a file which will appear after compilation by clicking "Regulation Error View" on Compile pulldown menu.</P>
<P ALIGN="JUSTIFY">All these files are produced in a work directory called "proc" (automatically generated if it did not exist) under the "Page" directory specified on Context; the same directory can be set by the user through the LEGOMMI_WORK environment variable.</P>
<P ALIGN="JUSTIFY">The following figure shows the above steps:</P>
<P ALIGN="JUSTIFY"><IMG SRC="Image101.gif" WIDTH=278 HEIGHT=423></P>
<B><FONT SIZE=5><P><A NAME="CompRegTask"></A>LEGOMMI: compilation of a regulation task</P>
</B></FONT><P ALIGN="JUSTIFY">Once the graphic build and the generation of the LEGO fortran code of every relevant regulation scheme has been completed, the user can generate the regulation task by pressing "Regulation Task" on the Compile's pulldown menu in the config's main window. REGOMMI includes in the task only the schemes which have set "in use" the dedicated flag <A NAME="_Hlk421918172"><A HREF="#compRegSchem"><U><FONT COLOR="#0000ff">Compile Regulation Scheme</U></FONT></A></A><U>.</P>
<P ALIGN="JUSTIFY">Depending on the contents of the regulation schemes (and their connections through interfaces iconreg) REGOMMI produces the f01.dat and the f14.dat files and generates the task. During this operation N regulation schemes are involved and a number of them will be connected depending on their mutual connections. Every scheme is a single task block.</P>
<P ALIGN="JUSTIFY">&nbsp;</P></U></BODY>
</HTML>
