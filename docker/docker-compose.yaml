

services:
  LegoPSTServ:
    image: aguagliardi/legopst:latest
    container_name: legopst_shell_container
    # Queste due righe sono corrette per l'interattivitÃ 
    stdin_open: true  # Equivalente a -i di docker run
    tty: true         # Equivalente a -t di docker run
    environment:
      - DISPLAY=${DISPLAY}
    volumes:
      - "/tmp/.X11-unix:/tmp/.X11-unix"
      - "/home/antonio:/root"
    working_dir: /root
    command: >
      bash -c "
      if [ -f /home/legoroot_fedora41/.profile_legoroot ]; then
        echo 'Sourcing /home/legoroot_fedora41/.profile_legoroot...';
        source /home/legoroot_fedora41/.profile_legoroot;
      else
        echo 'Attenzione: /home/legoroot_fedora41/.profile_legoroot non trovato nel container.';
      fi;
      echo 'Avvio della shell di login interattiva...';
      exec bash -l
      "

# services:
#   LegoPSTServ:
#     image: aguagliardi/legopst:latest
#     network_mode: "host"
#     container_name: LEGOPST
#     command: /bin/bash -c "source /home/legoroot_fedora41/.profile_legoroot"
#     stdin_open: true # docker run -i
#     tty: true        # docker run -t
#     environment:
#       DISPLAY: $DISPLAY
#       REDIS_HOST: localhost
#       REDIS_PORT: 6380
#       REDIS_PASSWORD: mypassw
#     volumes:
#             - "/tmp/.X11-unix:/tmp/.X11-unix"
#       #      - "..:/home/dt-rse-mosaik"

#networks:
#  DT-net:
#    driver: bridge
