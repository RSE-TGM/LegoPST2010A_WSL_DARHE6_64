<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>Nuova pagina 1</title>
<meta name="Microsoft Theme" content="copy_of_industrial 011, default">
</head>

<body background="_themes/copy_of_industrial/lego_bg_studs.gif" bgcolor="#FFFFFF" text="#000000" link="#3366CC" vlink="#666666" alink="#996600"><!--mstheme--><font face="Trebuchet MS, Arial, Helvetica">

<h1 align="center"><!--mstheme--><font color="#000066"><span lang="EN-GB"><b><i><font size="5">What does &quot;xxxxC1&quot; have to do when it is called
for residuals computation?</font></i></b></span><!--mstheme--></font></h1>
<p class="MsoNormal"><span lang="EN-GB">When IFUN is 2 &quot;xxxxC1&quot; must
evaluate the block equations residuals. During transient simulation, the
residuals of differential equations must are the time derivatives of the related
state output variables:</span></p>
<p class="formulabis" align="center"><span lang="EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-text-raise:-25.0pt"><!--[if gte vml 1]><v:shapetype id="_x0000_t75"
 coordsize="21600,21600" o:spt="75" o:preferrelative="t" path="m@4@5l@4@11@9@11@9@5xe"
 filled="f" stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="_x0000_i1025" type="#_x0000_t75" style='width:226.2pt;
 height:55.8pt' o:ole="">
 <v:imagedata src="file:///C:/TEMP/msoclip1/01/clip_image001.wmz" o:title=""/>
</v:shape><![endif]-->
</span><img border="0" src="images/lg_mod5.gif" width="213" height="62"><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="Equation.3" ShapeID="_x0000_i1025"
  DrawAspect="Content" ObjectID="_1067254677">
 </o:OLEObject>
</xml><![endif]-->
<span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>(differential equations)</span></p>
<p class="formulabis" align="center"><span lang="EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-text-raise:-25.0pt"><!--[if gte vml 1]><v:shape id="_x0000_i1026"
 type="#_x0000_t75" style='width:229.8pt;height:55.8pt' o:ole="">
 <v:imagedata src="file:///C:/TEMP/msoclip1/01/clip_image003.wmz" o:title=""/>
</v:shape><![endif]-->
</span><img border="0" src="images/lg_mod6.gif" width="217" height="62"><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="Equation.3" ShapeID="_x0000_i1026"
  DrawAspect="Content" ObjectID="_1067254680">
 </o:OLEObject>
</xml><![endif]-->
<span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>(related residuals)</span></p>
<p class="formula"><span lang="EN-GB">while the residuals of the algebraic
equations are not so strictly related with algebraic output variables:</span></p>
<p class="formulabis" align="center"><span lang="EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-text-raise:-25.0pt"><!--[if gte vml 1]><v:shape id="_x0000_i1027"
 type="#_x0000_t75" style='width:225pt;height:55.8pt' o:ole="">
 <v:imagedata src="file:///C:/TEMP/msoclip1/01/clip_image005.wmz" o:title=""/>
</v:shape><![endif]-->
</span><img border="0" src="images/lg_mod7.gif" width="217" height="62"><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="Equation.3" ShapeID="_x0000_i1027"
  DrawAspect="Content" ObjectID="_1067254683">
 </o:OLEObject>
</xml><![endif]-->
<span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>(algebraic equations)</span></p>
<p class="formulabis" align="center"><span lang="EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="mso-text-raise:-25.0pt"><!--[if gte vml 1]><v:shape id="_x0000_i1028"
 type="#_x0000_t75" style='width:243pt;height:55.8pt' o:ole="">
 <v:imagedata src="file:///C:/TEMP/msoclip1/01/clip_image007.wmz" o:title=""/>
</v:shape><![endif]-->
</span><img border="0" src="images/lg_mod8.gif" width="237" height="62"><!--[if gte mso 9]><xml>
 <o:OLEObject Type="Embed" ProgID="Equation.3" ShapeID="_x0000_i1028"
  DrawAspect="Content" ObjectID="_1067254686">
 </o:OLEObject>
</xml><![endif]-->
<span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>(related residuals)</span></p>
<p class="MsoNormal"><span lang="EN-GB">All the residuals must be normalized, as
they have to be compared to the tolerance thresholds. Note that the incoming
values of the block variables are normalized too. So, if the module computes the
residuals directly on the normalized values of its variable, the residuals are
automatically normalized. Otherwise, they have to be normalized using the
normalization factors related to the quantities involved in the residuals.</span></p>
<p class="MsoNormal"><span lang="EN-GB">The steady state of a system is defined
as the system state where the time derivatives of all system quantities
(including state variables) are null. So, during steady state computation, also
the residuals of differential equations are treated exactly like they were
residuals of other algebraic equations.</span></p>
<p class="MsoNormal"><span lang="EN-GB">This means that the mathematical
expression used for differential residuals evaluation during steady state
computation may be different from transient simulation one, and it may be not
strictly related with state output variables.</span></p>
<p class="MsoNormal"><span lang="EN-GB">This fact is often used for mass
continuity and energy continuity equations: during transient computation these
equations must be combined (using also fluid thermodynamic properties) to
exactly evaluate (e.g.) pressure and enthalpy time derivatives.</span></p>
<p class="MsoNormal"><span lang="EN-GB">During steady state computation, it is
more easy to use directly the mass equilibrium and the energy equilibrium
equations, in their easiest form: the two residuals may be substituted with the
algebraic sums of all inlet and outlet mass and energy flows. This is also
strongly suggested, as it allows a better and faster convergence of the solution
of the steady state algebraic system.</span></p>
<p class="MsoNormal"><span lang="EN-GB">Most modules don't compute equation
residuals directly in their &quot;xxxxC1&quot; subroutines, but they use an
auxiliary semi-standard routine, whose name is usually &quot;xxxx&quot; (the
same of the module, with no suffix). This also allows the numerical computation
of Jacobian matrix (using the library routine NAJAC).</span></p>

<!--mstheme--></font></body>

</html>
